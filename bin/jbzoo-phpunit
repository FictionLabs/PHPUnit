#!/usr/bin/env php
<?php

use JBZoo\PHPUnit\Console\App;

umask(0000);
set_time_limit(0);

$vendorPaths = array(
    realpath(__DIR__ . '/vendor/autoload.php'),
    realpath(__DIR__ . '/../vendor/autoload.php'),
    realpath(__DIR__ . '/../../vendor/autoload.php'),
    realpath(__DIR__ . '/../../../vendor/autoload.php'),
    realpath(__DIR__ . '/../../../../vendor/autoload.php'),
    realpath('./vendor/autoload.php'),
);

foreach ($vendorPaths as $file) {
    if (file_exists($file)) {
        require_once $file;
        break;
    }
}

$application = new App('JBZoo PHPUnit');

if ($dir = realpath(PROJECT_TESTS . '/Console/Command')) {
    $application->registerCommands($dir);
}

if ($dir = realpath(PROJECT_SRC . '/Console/Command')) {
    $application->registerCommands($dir);
}

$application->registerCommands(__DIR__ . '/../src/Console/Command');

$application->run();
